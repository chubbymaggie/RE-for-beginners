\section{\RU{Проверка результата scanf()}\EN{scanf() result checking}}

\RU {Как уже было упомянуто, использовать \scanf в наше время слегка старомодно. 
Но если уж жизнь заставила этим заниматься, нужно хотя бы проверять, сработал ли \scanf 
правильно или пользователь ввел вместо числа что-то другое, что \scanf не смог трактовать как число.}%
\EN{As was noted before, it is slightly old-fashioned to use \scanf today. 
But if we have to, we need to at least check if \scanf finishes correctly without an error.}

\lstinputlisting{patterns/04_scanf/3_checking_retval/ex3.c}

\RU{По стандарту,}\EN{By standard, the} 
\scanf\footnote{scanf, wscanf: \href{http://go.yurichev.com/17255}{MSDN}} 
\RU{возвращает количество успешно полученных значений.}
\EN{function returns the number of fields it has successfully read.}

\RU{В нашем случае, если всё успешно и пользователь ввел таки некое число, \scanf вернет 1. 
А если нет, то 0 (или \ac{EOF}).} 
\EN{In our case, if everything goes fine and the user enters a number 
\scanf returns 1, or in case of error (or \ac{EOF}) --- 0.}

\RU{Добавим код, проверяющий результат \scanf и в случае ошибки он сообщает пользователю что-то другое.}%
\EN{Let's add some C code to check the \scanf return value and print error message in case of an error.}

\RU{Это работает предсказуемо}\EN{This works as expected}:

\begin{lstlisting}
C:\...>ex3.exe
Enter X:
123
You entered 123...

C:\...>ex3.exe
Enter X:
ouch
What you entered? Huh?
\end{lstlisting}

% subsections
\input{patterns/04_scanf/3_checking_retval/x86}
\input{patterns/04_scanf/3_checking_retval/x64}
\ifdefined\IncludeARM
\input{patterns/04_scanf/3_checking_retval/ARM}
\fi
\ifdefined\IncludeMIPS
\input{patterns/04_scanf/3_checking_retval/MIPS}
\fi

\ifdefined\IncludeExercises
\subsection{\Exercise}

\index{x86!\Instructions!Jcc}
\index{ARM!\Instructions!Bcc}
\EN{As we can see, the JNE/JNZ instruction can be easily replaced by the JE/JZ and vice versa 
(or BNE by BEQ and vice versa).}
\RU{Как мы можем увидеть, инструкцию JNE/JNZ можно вполне заменить на JE/JZ или наоборот 
(или BNE на BEQ и наоборот).}
\EN{But then the basic blocks must also be swapped.}\RU{Но при этом ещё нужно переставить базовые блоки местами.}
\EN{Try to do this in some of the examples.}\RU{Попробуйте сделать это в каком-нибудь примере.}
\fi
